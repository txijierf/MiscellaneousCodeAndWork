<!DOCTYPE html>
<html>
<head>
	<title>2D vector - Closure</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
</head>

<body>
	<div class="log"></div>
	<script type="text/javascript">	
        function Vector (x, y) {
            this.x = x;
            this.y = y;
			
			//calculate the magnitude
	    	this.magnitude = function() {
				var _m = Math.sqrt((this.x*this.x) + (this.y*this.y));
				return _m;
			}

			//add two vectors together
			this.add = function (other) {
			    var vResult = new Vector(this.x +other.x, this.y +other.y);
			    return vResult;
			}
			
			//get the length of the vector
			this.getLength = function() {
				return this.magnitude();
			}
			
			//normalize the vector
			this.normalize = function() {
				var tmp = this.magnitude();
				this.x = this.x/tmp;
				this.y = this.y/tmp;
			}
		}
		
		var v1 = new Vector(4, 5);
		var v2 = new Vector(8, 2);

        //Add v2 to v1 and store in v3
		var v3 = null;
		try {
		    v3 = v1.add(v2);
		}
		catch (ee) {
		    console.log("Vector adding error: ", ee.message); 
        }

		//check if v3 was successfully stored
        var len=0;
		if(v3!=null)
			len = v3.getLength();
		//attempt to normalize
        try {
			v2.normalize();
		}
		catch (e) {
			console.log("Vector normalization error: ", e.message);
		}

		// check the correctness of the length of v2
        var lenV2=0;
		try {
			lenV2 = v2.getLength();
		}
		catch (ea) {
			console.log("Error in Length of v2: ", ea.message);
		}

		//format and output to html
        var logSt = "<p>";
		logSt +="v1.x = " + v1.x + "<br>";
		logSt +="v1.y = " + v1.y + "<br>";
		logSt +="v2.x.toFixed(3) = " + v2.x.toFixed(3) + "<br>";
		logSt +="v2.y.toFixed(3) = " + v2.y.toFixed(3) + "<br>";
		logSt +="v2.length() = " + lenV2 + "<br>";
		logSt +="v3.x = " + v3.x + "<br>";
		logSt +="v3.y =" + v3.y + "<br>";
		logSt +="len.toFixed(3) = " + len.toFixed(3) + "<br>";
		logSt += "</p>";
		
		$(document).ready(function () {
			$(".log").html(logSt);
		});
	</script>
</body>
</html>